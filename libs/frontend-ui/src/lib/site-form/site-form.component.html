<form class="space-y-6" (ngSubmit)="submit()" [formGroup]="form" data-testid="site-form">
  <div class="grid gap-6 sm:grid-cols-2">
    <div class="space-y-2">
      <label class="text-sm font-medium text-muted" for="name">Site Name</label>
      <input
        id="name"
        data-testid="site-name-input"
        class="input-modern"
        type="text"
        placeholder="e.g. Sunny Valley Plant"
        formControlName="name"
        required
        aria-invalid="{{ form.controls.name.invalid }}"
        aria-describedby="name-error"
      />
      <p id="name-error" role="alert" data-testid="error-name" class="text-xs font-medium" [class.text-danger]="form.controls.name.invalid && form.controls.name.touched" [class.hidden]="!(form.controls.name.invalid && form.controls.name.touched)">
        Name is required (min 2 chars)
      </p>
    </div>

    <div class="space-y-2">
      <label class="text-sm font-medium text-muted" for="location">Location</label>
      <input
        id="location"
        data-testid="site-location-input"
        class="input-modern"
        type="text"
        placeholder="e.g. California, USA"
        formControlName="location"
        required
        aria-invalid="{{ form.controls.location.invalid }}"
        aria-describedby="location-error"
      />
      <p id="location-error" role="alert" data-testid="error-location" class="text-xs font-medium" [class.text-danger]="form.controls.location.invalid && form.controls.location.touched" [class.hidden]="!(form.controls.location.invalid && form.controls.location.touched)">
        Location is required
      </p>
    </div>

    <div class="space-y-2">
      <label class="text-sm font-medium text-muted" for="capacity">Capacity (kW)</label>
      <input
        id="capacity"
        data-testid="site-capacity-input"
        class="input-modern"
        type="number"
        placeholder="0.00"
        formControlName="capacity_kw"
        min="1"
        required
        aria-invalid="{{ form.controls.capacity_kw.invalid }}"
        aria-describedby="capacity-error"
      />
      <p id="capacity-error" role="alert" data-testid="error-capacity" class="text-xs font-medium" [class.text-danger]="form.controls.capacity_kw.invalid && form.controls.capacity_kw.touched" [class.hidden]="!(form.controls.capacity_kw.invalid && form.controls.capacity_kw.touched)">
        Capacity must be greater than 0
      </p>
    </div>

    <div class="space-y-2">
      <label class="text-sm font-medium text-muted" for="status">Operational Status</label>
      <div class="relative">
        <select
          id="status"
          data-testid="site-status-select"
          class="input-modern appearance-none cursor-pointer"
          formControlName="status"
          required
          aria-required="true"
          aria-describedby="status-help"
        >
          <option value="active">Active</option>
          <option value="maintenance">Maintenance</option>
          <option value="offline">Offline</option>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted">
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </div>
      </div>
    </div>
  </div>

  <div class="pt-4 flex items-center gap-4">
    <button
      type="submit"
      data-testid="submit-button"
      class="btn-primary min-w-[120px] flex justify-center"
    >
      Create Site
    </button>
    <button
      type="button"
      data-testid="cancel-button"
      class="px-4 py-2 rounded-lg text-sm font-medium text-muted hover:text-white transition-colors"
      routerLink="/sites"
    >
      Cancel
    </button>
  </div>
</form>
